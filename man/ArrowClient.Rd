% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/arrow-client.R
\name{ArrowClient}
\alias{ArrowClient}
\title{ArrowClient}
\description{
An R6 class providing a high-performance client for AstraeaDB using the
Apache Arrow Flight protocol. Arrow Flight enables efficient columnar data
transfer, making it well-suited for bulk queries and analytical workloads.

The \pkg{arrow} package is optional and listed in \code{Suggests}. This
client checks for its availability at initialization and provides an
informative error message if \pkg{arrow} is not installed.
}
\details{
Arrow Flight is a gRPC-based protocol for high-performance data transport.
When the AstraeaDB server exposes a Flight endpoint, this client can execute
GQL queries and receive results as Apache Arrow Tables or record batches,
which are more efficient than JSON for large result sets.

Typical usage:
\enumerate{
\item Create an \code{ArrowClient} instance with the Flight URI.
\item Call \code{$connect()} to establish the connection.
\item Execute queries with \code{$query()} (returns Arrow Table) or
\code{$query_df()} (returns data.frame).
\item Call \code{$disconnect()} when finished.
}

For most users, the \code{\link{UnifiedClient}} is recommended as it
automatically selects the best transport available.
}
\examples{
\dontrun{
# Requires the arrow package: install.packages("arrow")
client <- ArrowClient$new("grpc://localhost:7689")
client$connect()

# Execute a GQL query and get an Arrow Table
table <- client$query("MATCH (n:Person) RETURN n.name, n.age")

# Or get a data.frame directly
df <- client$query_df("MATCH (n:Person) RETURN n.name, n.age")

# Process large results in batches
client$query_batches(
  "MATCH (n) RETURN n",
  callback = function(batch) {
    cat("Received batch with", nrow(batch), "rows\n")
  }
)

# List available flights
flights <- client$list_flights()

client$disconnect()
}


## ------------------------------------------------
## Method `ArrowClient$query`
## ------------------------------------------------

\dontrun{
client <- ArrowClient$new()
client$connect()
table <- client$query("MATCH (n:Person) RETURN n.name")
client$disconnect()
}

## ------------------------------------------------
## Method `ArrowClient$query_df`
## ------------------------------------------------

\dontrun{
client <- ArrowClient$new()
client$connect()
df <- client$query_df("MATCH (n:Person) RETURN n.name, n.age")
client$disconnect()
}

## ------------------------------------------------
## Method `ArrowClient$query_batches`
## ------------------------------------------------

\dontrun{
client <- ArrowClient$new()
client$connect()
client$query_batches(
  "MATCH (n) RETURN n",
  callback = function(batch) {
    cat("Batch with", nrow(batch), "rows\n")
  }
)
client$disconnect()
}

## ------------------------------------------------
## Method `ArrowClient$list_flights`
## ------------------------------------------------

\dontrun{
client <- ArrowClient$new()
client$connect()
flights <- client$list_flights()
client$disconnect()
}
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{uri}}{Character. The Arrow Flight server URI.
Defaults to \code{"grpc://localhost:7689"}.}

\item{\code{client}}{The Arrow Flight client connection object, or \code{NULL}
when disconnected.}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-ArrowClient-new}{\code{ArrowClient$new()}}
\item \href{#method-ArrowClient-connect}{\code{ArrowClient$connect()}}
\item \href{#method-ArrowClient-disconnect}{\code{ArrowClient$disconnect()}}
\item \href{#method-ArrowClient-is_connected}{\code{ArrowClient$is_connected()}}
\item \href{#method-ArrowClient-query}{\code{ArrowClient$query()}}
\item \href{#method-ArrowClient-query_df}{\code{ArrowClient$query_df()}}
\item \href{#method-ArrowClient-query_batches}{\code{ArrowClient$query_batches()}}
\item \href{#method-ArrowClient-list_flights}{\code{ArrowClient$list_flights()}}
\item \href{#method-ArrowClient-print}{\code{ArrowClient$print()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-ArrowClient-new"></a>}}
\if{latex}{\out{\hypertarget{method-ArrowClient-new}{}}}
\subsection{Method \code{new()}}{
Create a new ArrowClient.

Checks that the \pkg{arrow} package is installed and available. If not,
an informative error is raised directing the user to install it.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{ArrowClient$new(uri = "grpc://localhost:7689")}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{uri}}{Character. The Arrow Flight gRPC URI.
Defaults to \code{"grpc://localhost:7689"}.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A new \code{ArrowClient} object.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-ArrowClient-connect"></a>}}
\if{latex}{\out{\hypertarget{method-ArrowClient-connect}{}}}
\subsection{Method \code{connect()}}{
Connect to the Arrow Flight server.

Establishes a gRPC connection to the AstraeaDB Flight endpoint
specified by \code{uri}.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{ArrowClient$connect()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Invisibly returns \code{self} for method chaining.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-ArrowClient-disconnect"></a>}}
\if{latex}{\out{\hypertarget{method-ArrowClient-disconnect}{}}}
\subsection{Method \code{disconnect()}}{
Disconnect from the Arrow Flight server.

Closes the connection and sets the client to \code{NULL}.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{ArrowClient$disconnect()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Invisibly returns \code{self} for method chaining.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-ArrowClient-is_connected"></a>}}
\if{latex}{\out{\hypertarget{method-ArrowClient-is_connected}{}}}
\subsection{Method \code{is_connected()}}{
Check whether the client is currently connected.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{ArrowClient$is_connected()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
Logical. \code{TRUE} if connected, \code{FALSE} otherwise.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-ArrowClient-query"></a>}}
\if{latex}{\out{\hypertarget{method-ArrowClient-query}{}}}
\subsection{Method \code{query()}}{
Execute a GQL query and return an Arrow Table.

Sends the query as a Flight command descriptor, retrieves flight info,
and fetches the data from the first endpoint.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{ArrowClient$query(gql)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{gql}}{Character. A GQL query string.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
An Arrow Table containing the query results.
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
client <- ArrowClient$new()
client$connect()
table <- client$query("MATCH (n:Person) RETURN n.name")
client$disconnect()
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-ArrowClient-query_df"></a>}}
\if{latex}{\out{\hypertarget{method-ArrowClient-query_df}{}}}
\subsection{Method \code{query_df()}}{
Execute a GQL query and return the result as a data.frame.

This is a convenience wrapper around \code{$query()} that converts the
Arrow Table to a base R data.frame.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{ArrowClient$query_df(gql)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{gql}}{Character. A GQL query string.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A data.frame containing the query results.
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
client <- ArrowClient$new()
client$connect()
df <- client$query_df("MATCH (n:Person) RETURN n.name, n.age")
client$disconnect()
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-ArrowClient-query_batches"></a>}}
\if{latex}{\out{\hypertarget{method-ArrowClient-query_batches}{}}}
\subsection{Method \code{query_batches()}}{
Execute a GQL query and process results in record batches.

Instead of reading all results into memory at once, this method
streams results as individual Arrow RecordBatch objects and passes
each to the provided callback function. This is useful for processing
large result sets with bounded memory usage.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{ArrowClient$query_batches(gql, callback)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{gql}}{Character. A GQL query string.}

\item{\code{callback}}{Function. A function that accepts a single argument
(an Arrow RecordBatch). Called once for each batch received.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Invisibly returns \code{NULL}.
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
client <- ArrowClient$new()
client$connect()
client$query_batches(
  "MATCH (n) RETURN n",
  callback = function(batch) {
    cat("Batch with", nrow(batch), "rows\n")
  }
)
client$disconnect()
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-ArrowClient-list_flights"></a>}}
\if{latex}{\out{\hypertarget{method-ArrowClient-list_flights}{}}}
\subsection{Method \code{list_flights()}}{
List available flights on the server.

Queries the Flight server for its list of available flight descriptors.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{ArrowClient$list_flights()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
A list of available flights as reported by the server.
}
\subsection{Examples}{
\if{html}{\out{<div class="r example copy">}}
\preformatted{\dontrun{
client <- ArrowClient$new()
client$connect()
flights <- client$list_flights()
client$disconnect()
}
}
\if{html}{\out{</div>}}

}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-ArrowClient-print"></a>}}
\if{latex}{\out{\hypertarget{method-ArrowClient-print}{}}}
\subsection{Method \code{print()}}{
Print a summary of the ArrowClient.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{ArrowClient$print(...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{...}}{Ignored. Present for compatibility with the generic.}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Invisibly returns \code{self}.
}
}
}
